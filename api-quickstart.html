<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Integration Quickstart | DISCERN Protocol</title>
    
    <!-- Desktop Enhancement Framework -->
    <link rel="stylesheet" href="desktop-enhancements.css">
    
    <script src="theme-system.js"></script>
    <style>
        :root {
            /* Light Theme Variables */
            --bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-secondary: rgba(255, 255, 255, 0.98);
            --bg-glass: rgba(255, 255, 255, 0.25);
            --bg-glass-hover: rgba(255, 255, 255, 0.35);
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --text-tertiary: #6b7280;
            --border-color: rgba(102, 126, 234, 0.2);
            --shadow-color: rgba(0, 0, 0, 0.1);
            --shadow-hover: rgba(102, 126, 234, 0.3);
            --backdrop-blur: blur(20px);
        }

        [data-theme="dark"] {
            /* Dark Theme Variables - WCAG AA+ Compliant */
            --bg-primary: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --bg-secondary: rgba(15, 23, 42, 0.98);
            --bg-glass: rgba(30, 41, 59, 0.85);
            --bg-glass-hover: rgba(30, 41, 59, 0.95);
            --card-bg: rgba(30, 41, 59, 0.95);
            /* High contrast text colors for accessibility */
            --text-primary: #ffffff;
            --text-secondary: #f1f5f9;
            --text-tertiary: #e2e8f0;
            --text-on-glass: #ffffff;
            --text-hover: #c4b5fd;
            --border-color: rgba(203, 213, 225, 0.3);
            --shadow-color: rgba(0, 0, 0, 0.4);
            --shadow-hover: rgba(196, 181, 253, 0.4);
            --backdrop-blur: blur(20px);
            --accent-primary: #a78bfa;
            --accent-secondary: #8b5cf6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-secondary);
            background: var(--bg-primary);
            min-height: 100vh;
            transition: all 0.3s ease;
            opacity: 0;
            animation: fadeInPage 0.5s ease-in-out forwards;
        }
        
        @keyframes fadeInPage {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Theme Toggle in Header */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: var(--bg-glass);
            backdrop-filter: var(--backdrop-blur);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            padding: 12px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: var(--text-primary);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px var(--shadow-color);
        }

        .theme-toggle:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--shadow-hover);
        }

        .theme-icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover .theme-icon {
            transform: scale(1.1);
        }

        .container {
            background: var(--bg-secondary);
            backdrop-filter: var(--backdrop-blur);
            min-height: 100vh;
        }

        .header {
            text-align: center;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.1rem;
            color: var(--text-tertiary);
        }

        .api-config {
            background: var(--bg-glass);
            backdrop-filter: var(--backdrop-blur);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 15px var(--shadow-color);
        }

        .api-config h2 {
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .config-grid {
            display: grid;
            margin-bottom: 1rem;
        }

        .config-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .config-item label {
            font-weight: 600;
            color: var(--text-primary);
        }

        .config-item input, .config-item select {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.9rem;
            transition: border-color 0.2s;
            background: var(--bg-glass);
            color: var(--text-primary);
        }

        .config-item input:focus, .config-item select:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .config-item input::placeholder {
            color: var(--text-tertiary);
        }

        .provider-tabs {
            display: flex;
            margin-bottom: 2rem;
            background: var(--bg-glass);
            border-radius: 12px;
            padding: 4px;
            overflow-x: auto;
            border: 1px solid var(--border-color);
        }

        .provider-tab {
            flex: 1;
            padding: 0.75rem 1rem;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-tertiary);
            transition: all 0.2s;
            white-space: nowrap;
        }

        .provider-tab.active {
            background: var(--accent-primary);
            color: white;
            box-shadow: 0 2px 4px var(--shadow-color);
        }

        .provider-tab:hover:not(.active) {
            background: var(--bg-glass-hover);
            color: var(--text-secondary);
        }

        .language-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .language-tab {
            padding: 0.5rem 1rem;
            background: var(--bg-glass);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .language-tab.active {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }

        .language-tab:hover:not(.active) {
            background: var(--bg-glass-hover);
            color: var(--text-primary);
        }

        .variant-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .variant-tab {
            padding: 0.4rem 0.8rem;
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            color: var(--text-tertiary);
            transition: all 0.2s;
        }

        .variant-tab.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .variant-tab:hover:not(.active) {
            background: var(--bg-glass-hover);
            color: var(--text-secondary);
        }

        .code-section {
            background: var(--bg-glass);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 1.5rem;
            border: 2px solid var(--border-color);
        }

        .code-header {
            background: var(--bg-glass-hover);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }

        .code-title {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .copy-button {
            padding: 0.5rem 1rem;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .copy-button:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        .copy-button.copied {
            background: #dc2626;
        }

        .code-content {
            padding: 1.5rem;
            overflow-x: auto;
            background: #1f2937;
        }

        .code-content pre {
            margin: 0;
            font-family: 'Fira Code', 'Monaco', 'Cascadia Code', monospace;
            font-size: 0.85rem;
            line-height: 1.5;
            color: #f9fafb;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .info-panel {
            background: var(--bg-glass);
            border: 2px solid var(--accent-primary);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            backdrop-filter: var(--backdrop-blur);
        }

        .info-panel h3 {
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-panel ul {
            margin-left: 1.5rem;
            color: var(--text-secondary);
        }

        .info-panel li {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .info-panel strong {
            color: var(--text-primary);
        }

        .info-panel a {
            color: var(--accent-primary);
            text-decoration: none;
        }

        .info-panel a:hover {
            text-decoration: underline;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 0.75rem 1.5rem;
            background: var(--bg-glass);
            backdrop-filter: var(--backdrop-blur);
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            box-shadow: 0 4px 15px var(--shadow-color);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border: 1px solid var(--border-color);
        }

        .back-button:hover {
            background: var(--bg-glass-hover);
            transform: translateY(-2px) translateX(-2px);
            box-shadow: 0 8px 25px var(--shadow-hover);
        }
        
        .back-button::before {
            content: '‚Üê';
            transition: transform 0.3s ease;
        }
        
        .back-button:hover::before {
            transform: translateX(-3px);
        }

        .installation-notes {
            background: var(--bg-glass);
            border: 2px solid #f59e0b;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
            backdrop-filter: var(--backdrop-blur);
        }

        .installation-notes strong {
            color: var(--text-primary);
        }

        .installation-notes code {
            background: var(--bg-glass-hover);
            padding: 2px 4px;
            border-radius: 4px;
            font-family: monospace;
            color: var(--text-primary);
        }

        .model-info {
            background: var(--bg-glass);
            border: 2px solid #22c55e;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
            backdrop-filter: var(--backdrop-blur);
        }

        .model-info strong {
            color: var(--text-primary);
        }

        .error-handling {
            background: var(--bg-glass);
            border: 2px solid #ef4444;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
            backdrop-filter: var(--backdrop-blur);
        }

        .error-handling strong {
            color: var(--text-primary);
        }

        .hidden {
            display: none;
        }

        /* Navigation */
        nav {
            background: var(--bg-glass);
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 12px;
            backdrop-filter: var(--backdrop-blur);
            border: 1px solid var(--border-color);
        }

        nav div {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        nav a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        nav a:hover {
            background: var(--bg-glass-hover);
            color: var(--text-hover);
            transform: translateY(-1px);
        }

        nav button {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        nav button:hover {
            background: var(--bg-glass-hover);
            color: var(--text-hover);
            transform: translateY(-1px);
        }

        /* Additional dark mode text fixes */
        [data-theme="dark"] .container,
        [data-theme="dark"] .api-config,
        [data-theme="dark"] .info-panel {
            color: var(--text-secondary);
        }

        [data-theme="dark"] .container h1,
        [data-theme="dark"] .container h2,
        [data-theme="dark"] .container h3,
        [data-theme="dark"] .api-config h2,
        [data-theme="dark"] .info-panel h3 {
            color: var(--text-primary) !important;
        }

        /* Mobile-specific overrides are handled by desktop-enhancements.css */

        /* Floating Chat Button */
        .floating-chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            animation: pulse-heart 2s infinite;
        }

        @keyframes pulse-heart {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .floating-chat-button:hover {
            transform: scale(1.15);
            box-shadow: 0 12px 32px rgba(102, 126, 234, 0.6);
        }

        .floating-chat-button.hidden {
            display: none;
        }

        .chat-widget-panel {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 400px;
            height: 600px;
            background: var(--bg-secondary);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            transform: translateY(calc(100% + 60px));
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 999;
            overflow: hidden;
        }

        .chat-widget-panel.active {
            transform: translateY(0);
            opacity: 1;
        }

        .chat-widget-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 20px 20px 0 0;
        }

        .chat-header-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .chat-icon {
            font-size: 1.5rem;
        }

        .chat-header-actions {
            display: flex;
            gap: 0.5rem;
        }

        .chat-action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 1.2rem;
        }

        .chat-action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .chat-widget-body {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0;
            background: var(--bg-secondary);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            background: transparent;
            min-height: 300px;
            max-height: 400px;
        }

        .chat-message {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            align-items: flex-start;
        }

        .chat-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .chat-avatar.assistant {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .chat-avatar.user {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
        }

        .chat-bubble {
            background: var(--bg-glass);
            backdrop-filter: var(--backdrop-blur);
            padding: 0.875rem 1.125rem;
            border-radius: 16px;
            max-width: 75%;
            line-height: 1.5;
            color: var(--text-primary);
        }

        .chat-bubble.assistant {
            border-top-left-radius: 4px;
        }

        .chat-bubble.user {
            border-top-right-radius: 4px;
            margin-left: auto;
        }

        .chat-input-area {
            padding: 0 1rem 1rem 1rem;
            background: var(--bg-secondary);
            display: flex;
            gap: 0.5rem;
        }

        .chat-input {
            flex: 1;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-glass);
            backdrop-filter: var(--backdrop-blur);
            color: var(--text-primary);
            font-size: 0.95rem;
            resize: none;
            min-height: 80px;
            font-family: inherit;
            transition: all 0.2s ease;
        }

        .chat-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .chat-input::placeholder {
            color: var(--text-tertiary);
        }

        .send-button {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            transition: all 0.2s ease;
            flex-shrink: 0;
            align-self: flex-end;
        }

        .send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        @media (max-width: 768px) {
            .chat-widget-panel {
                width: calc(100vw - 40px);
                height: calc(100vh - 40px);
                bottom: 20px;
                right: 20px;
            }

            .floating-chat-button {
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Theme Toggle Button -->
    <div class="theme-toggle" onclick="toggleTheme()">
        <span class="theme-icon" id="theme-icon">üåô</span>
        <span id="theme-text">Dark Mode</span>
    </div>

    <a href="repair.html" class="back-button" id="back-button">
        Back to REPAIR Protocol
    </a>

    <div class="container desktop-center responsive-padding">
        <div class="header header-section responsive-padding">
            <h1>üöÄ API Integration Quickstart</h1>
            <p>Complete guide for integrating Groq API with the REPAIR Protocol</p>
        </div>

        <!-- Navigation -->
        <nav class="navigation desktop-center">
            <div>
                <a href="index.html">üè† Home</a>
                <a href="repair.html">üîß Start REPAIR</a>
                <a href="mediation-mode.html">‚öñÔ∏è Mediation</a>
                <a href="sign-contract.html">üìù Contract</a>
                <a href="progress.html">üìä Progress</a>
                <a href="about.html">‚ÑπÔ∏è About</a>
            </div>
        </nav>

        <div class="api-config desktop-center">
            <h2>üîß LLM Provider Configuration</h2>
            <div class="config-grid features-grid desktop-center">
                <div class="config-item">
                    <label for="api-provider">LLM Provider</label>
                    <select id="api-provider" onchange="updateQuickstartProvider()">
                        <option value="groq" selected>Groq (Ultra-Fast)</option>
                        <option value="openai">OpenAI (GPT)</option>
                        <option value="anthropic">Anthropic (Claude)</option>
                        <option value="google">Google (Gemini)</option>
                    </select>
                </div>
                <div class="config-item">
                    <label for="api-key" id="api-key-label">API Key</label>
                    <input type="password" id="api-key" placeholder="Enter your API key">
                    <p style="font-size: 0.875rem; color: #6b7280; margin-top: 0.5rem;" id="api-key-info">
                        Get your free API key at <a href="https://console.groq.com/" target="_blank" style="color: #3b82f6;" id="api-key-link">console.groq.com</a>
                    </p>
                </div>
                <div class="config-item">
                    <label for="api-model">Model</label>
                    <select id="api-model">
                        <!-- Groq models -->
                        <option value="llama-3.3-70b-versatile" data-provider="groq" selected>Llama 3.3 70B (Recommended)</option>
                        <option value="llama-3.1-70b-versatile" data-provider="groq">Llama 3.1 70B</option>
                        <option value="mixtral-8x7b-32768" data-provider="groq">Mixtral 8x7B</option>
                        <option value="gemma2-9b-it" data-provider="groq">Gemma 2 9B</option>
                        <!-- OpenAI models -->
                        <option value="gpt-4o" data-provider="openai">GPT-4o</option>
                        <option value="gpt-4-turbo" data-provider="openai">GPT-4 Turbo</option>
                        <option value="gpt-3.5-turbo" data-provider="openai">GPT-3.5 Turbo</option>
                        <!-- Anthropic models -->
                        <option value="claude-3-5-sonnet-20241022" data-provider="anthropic">Claude 3.5 Sonnet</option>
                        <option value="claude-3-opus-20240229" data-provider="anthropic">Claude 3 Opus</option>
                        <option value="claude-3-haiku-20240307" data-provider="anthropic">Claude 3 Haiku</option>
                        <!-- Google models -->
                        <option value="gemini-2.0-flash-exp" data-provider="google">Gemini 2.0 Flash</option>
                        <option value="gemini-1.5-pro" data-provider="google">Gemini 1.5 Pro</option>
                        <option value="gemini-1.5-flash" data-provider="google">Gemini 1.5 Flash</option>
                    </select>
                </div>
            </div>
            <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem;">
                <button onclick="saveAPIConfiguration()" style="padding: 0.75rem 1.5rem; border: none; border-radius: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
                    üíæ Save Configuration
                </button>
                <button onclick="testAPIConnection()" style="padding: 0.75rem 1.5rem; border: 2px solid #667eea; border-radius: 8px; background: transparent; color: #667eea; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                    üß™ Test Connection
                </button>
            </div>
            <div id="api-status-message" style="text-align: center; margin-top: 1rem; padding: 0.75rem; border-radius: 8px; display: none;"></div>
        </div>

        <div class="info-panel desktop-center">
            <h3>üìã Getting Started</h3>
            <ul>
                <li><strong>Groq API:</strong> Get your free API key from <a href="https://console.groq.com/" target="_blank">Groq Console</a></li>
                <li><strong>Configuration:</strong> Enter your API key above to auto-populate all code examples</li>
                <li><strong>Models:</strong> Select your preferred Groq model to update all examples accordingly</li>
                <li><strong>Performance:</strong> Groq provides industry-leading inference speed with open-source models</li>
            </ul>
        </div>

        <div class="provider-tabs desktop-center" style="display: none;">
            <button class="provider-tab active" data-provider="groq">Groq API</button>
        </div>

        <div class="language-tabs desktop-center">
            <button class="language-tab active" data-language="javascript">JavaScript</button>
            <button class="language-tab" data-language="typescript">TypeScript</button>
            <button class="language-tab" data-language="python">Python</button>
            <button class="language-tab" data-language="java">Java</button>
            <button class="language-tab" data-language="curl">cURL</button>
            <button class="language-tab" data-language="php">PHP</button>
            <button class="language-tab" data-language="go">Go</button>
            <button class="language-tab" data-language="ruby">Ruby</button>
        </div>

        <div id="code-examples" class="desktop-center"></div>

        <div class="info-panel desktop-center">
            <h3>üéØ Best Practices</h3>
            <ul>
                <li><strong>Rate Limiting:</strong> Implement proper rate limiting to avoid API limits</li>
                <li><strong>Error Handling:</strong> Always handle HTTP errors and API-specific error responses</li>
                <li><strong>Security:</strong> Never expose API keys in client-side code</li>
                <li><strong>Timeouts:</strong> Set appropriate timeouts for API requests (30-60 seconds)</li>
                <li><strong>Streaming:</strong> Consider using streaming for long responses</li>
                <li><strong>Cost Monitoring:</strong> Track token usage and API costs</li>
            </ul>
        </div>
    </div>

    <script src="config/api-examples.js"></script>
    <script>
        // Theme management
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            document.documentElement.setAttribute('data-theme', newTheme);

            // Update theme toggle button
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');

            if (newTheme === 'dark') {
                themeIcon.textContent = '‚òÄÔ∏è';
                themeText.textContent = 'Light Mode';
            } else {
                themeIcon.textContent = 'üåô';
                themeText.textContent = 'Dark Mode';
            }

            // Store preference
            localStorage.setItem('theme', newTheme);
        }

        // Initialize theme
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);

            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');

            if (savedTheme === 'dark') {
                themeIcon.textContent = '‚òÄÔ∏è';
                themeText.textContent = 'Light Mode';
            } else {
                themeIcon.textContent = 'üåô';
                themeText.textContent = 'Dark Mode';
            }
        }

        // Provider configuration data
        const quickstartProviderConfigs = {
            groq: {
                endpoint: 'https://api.groq.com/openai/v1/chat/completions',
                link: 'https://console.groq.com/',
                linkText: 'console.groq.com',
                models: ['llama-3.3-70b-versatile', 'llama-3.1-70b-versatile', 'mixtral-8x7b-32768', 'gemma2-9b-it']
            },
            openai: {
                endpoint: 'https://api.openai.com/v1/chat/completions',
                link: 'https://platform.openai.com/api-keys',
                linkText: 'platform.openai.com',
                models: ['gpt-4o', 'gpt-4-turbo', 'gpt-3.5-turbo']
            },
            anthropic: {
                endpoint: 'https://api.anthropic.com/v1/messages',
                link: 'https://console.anthropic.com/',
                linkText: 'console.anthropic.com',
                models: ['claude-3-5-sonnet-20241022', 'claude-3-opus-20240229', 'claude-3-haiku-20240307']
            },
            google: {
                endpoint: 'https://generativelanguage.googleapis.com/v1beta/models/',
                link: 'https://makersuite.google.com/app/apikey',
                linkText: 'makersuite.google.com',
                models: ['gemini-2.0-flash-exp', 'gemini-1.5-pro', 'gemini-1.5-flash']
            }
        };

        function updateQuickstartProvider() {
            const provider = document.getElementById('api-provider').value;
            const config = quickstartProviderConfigs[provider];

            if (!config) return;

            // Update link
            const apiKeyLink = document.getElementById('api-key-link');
            const apiKeyInfo = document.getElementById('api-key-info');
            apiKeyLink.href = config.link;
            apiKeyLink.textContent = config.linkText;
            apiKeyInfo.innerHTML = `Get your API key at <a href="${config.link}" target="_blank" style="color: #3b82f6;">${config.linkText}</a>`;

            // Filter model dropdown
            const modelSelect = document.getElementById('api-model');
            const allOptions = modelSelect.querySelectorAll('option');

            allOptions.forEach(option => {
                const optionProvider = option.getAttribute('data-provider');
                if (optionProvider === provider) {
                    option.style.display = '';
                } else {
                    option.style.display = 'none';
                }
            });

            // Select first model for this provider
            if (config.models.length > 0) {
                modelSelect.value = config.models[0];
            }
        }

        // API Configuration Functions
        function saveAPIConfiguration() {
            const providerSelect = document.getElementById('api-provider');
            const apiKeyInput = document.getElementById('api-key');
            const modelSelect = document.getElementById('api-model');
            const statusMessage = document.getElementById('api-status-message');

            const provider = providerSelect.value;
            const apiKey = apiKeyInput.value.trim();
            const model = modelSelect.value;

            if (!apiKey) {
                showStatus('‚ùå Please enter your API key', 'error');
                return;
            }

            try {
                const providerConfig = quickstartProviderConfigs[provider];
                const config = {
                    provider: provider,
                    apiKey: apiKey,
                    model: model,
                    endpoint: providerConfig.endpoint
                };

                localStorage.setItem('repairAPIConfig', JSON.stringify(config));

                showStatus('‚úÖ Configuration saved successfully! You can now use this API key across all REPAIR Protocol pages.', 'success');
            } catch (error) {
                showStatus('‚ùå Error saving configuration: ' + error.message, 'error');
            }
        }

        async function testAPIConnection() {
            const providerSelect = document.getElementById('api-provider');
            const apiKeyInput = document.getElementById('api-key');
            const modelSelect = document.getElementById('api-model');

            const provider = providerSelect.value;
            const apiKey = apiKeyInput.value.trim();
            const model = modelSelect.value;

            if (!apiKey) {
                showStatus('‚ùå Please enter your API key first', 'error');
                return;
            }

            showStatus('üîÑ Testing connection...', 'info');

            try {
                const providerConfig = quickstartProviderConfigs[provider];
                let requestBody, headers;

                // Different providers have different API formats
                if (provider === 'anthropic') {
                    headers = {
                        'x-api-key': apiKey,
                        'Content-Type': 'application/json',
                        'anthropic-version': '2023-06-01'
                    };
                    requestBody = {
                        model: model,
                        messages: [{ role: 'user', content: 'Hello! This is a test message.' }],
                        max_tokens: 50
                    };
                } else if (provider === 'google') {
                    headers = {
                        'Content-Type': 'application/json'
                    };
                    const endpoint = `${providerConfig.endpoint}${model}:generateContent?key=${apiKey}`;
                    requestBody = {
                        contents: [{ parts: [{ text: 'Hello! This is a test message.' }] }]
                    };
                } else {
                    // OpenAI and Groq use the same format
                    headers = {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    };
                    requestBody = {
                        model: model,
                        messages: [{ role: 'user', content: 'Hello! This is a test message.' }],
                        max_tokens: 50
                    };
                }

                const endpoint = provider === 'google'
                    ? `${providerConfig.endpoint}${model}:generateContent?key=${apiKey}`
                    : providerConfig.endpoint;

                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify(requestBody)
                });

                if (response.ok) {
                    showStatus(`‚úÖ Connection successful! Your ${provider.toUpperCase()} API key is working with ${model}`, 'success');
                } else {
                    const error = await response.json();
                    showStatus('‚ùå Connection failed: ' + (error.error?.message || error.message || 'Invalid API key or model'), 'error');
                }
            } catch (error) {
                showStatus('‚ùå Connection error: ' + error.message, 'error');
            }
        }

        function showStatus(message, type) {
            const statusMessage = document.getElementById('api-status-message');
            statusMessage.textContent = message;
            statusMessage.style.display = 'block';

            const styles = {
                success: {
                    background: 'rgba(16, 185, 129, 0.1)',
                    color: '#059669',
                    border: '1px solid rgba(16, 185, 129, 0.3)'
                },
                error: {
                    background: 'rgba(239, 68, 68, 0.1)',
                    color: '#dc2626',
                    border: '1px solid rgba(239, 68, 68, 0.3)'
                },
                warning: {
                    background: 'rgba(245, 158, 11, 0.1)',
                    color: '#d97706',
                    border: '1px solid rgba(245, 158, 11, 0.3)'
                },
                info: {
                    background: 'rgba(59, 130, 246, 0.1)',
                    color: '#2563eb',
                    border: '1px solid rgba(59, 130, 246, 0.3)'
                }
            };

            const style = styles[type] || styles.info;
            Object.assign(statusMessage.style, style);
        }

        class APIQuickstart {
            constructor() {
                this.apiExamples = new APIExamples();
                this.currentLanguage = 'javascript';
                this.currentProvider = 'both';
                this.currentVariant = null;

                this.init();
            }

            init() {
                this.bindEvents();
                this.updateExamples();
            }

            bindEvents() {
                // Provider tabs
                document.querySelectorAll('.provider-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        document.querySelectorAll('.provider-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        this.currentProvider = tab.dataset.provider;
                        this.updateExamples();
                    });
                });

                // Language tabs
                document.querySelectorAll('.language-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        document.querySelectorAll('.language-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        this.currentLanguage = tab.dataset.language;
                        this.currentVariant = null; // Reset variant when changing language
                        this.updateExamples();
                    });
                });

                // API key inputs
                const groqKeyInput = document.getElementById('groq-key');
                const groqModelSelect = document.getElementById('groq-model');

                if (groqKeyInput) groqKeyInput.addEventListener('input', () => this.updateExamples());
                if (groqModelSelect) groqModelSelect.addEventListener('change', () => this.updateExamples());
            }

            updateExamples() {
                const container = document.getElementById('code-examples');
                container.innerHTML = '';

                const groqKeyInput = document.getElementById('groq-key');
                const groqModelSelect = document.getElementById('groq-model');

                const groqKey = groqKeyInput ? groqKeyInput.value || 'YOUR_GROQ_API_KEY' : 'YOUR_GROQ_API_KEY';
                const groqModel = groqModelSelect ? groqModelSelect.value : 'llama-3.3-70b-versatile';

                const langExamples = this.apiExamples.getLanguageExamples(this.currentLanguage);

                if (!langExamples || Object.keys(langExamples).length === 0) {
                    container.innerHTML = '<p>No examples available for this language.</p>';
                    return;
                }

                // Handle variant tabs for languages with multiple variants
                this.createVariantTabs(langExamples, container);

                // Get examples to display (Groq only)
                let examplestoShow = [];

                if (this.currentVariant && langExamples[this.currentVariant]) {
                    const variantExamples = langExamples[this.currentVariant];
                    if (variantExamples.groq) {
                        examplestoShow.push(variantExamples.groq);
                    }
                } else {
                    // Handle direct provider examples
                    if (langExamples.groq) {
                        examplestoShow.push(langExamples.groq);
                    }
                }

                // Update examples with current API key and model
                examplestoShow = this.apiExamples.updateApiKeys(examplestoShow, groqKey);
                examplestoShow = this.apiExamples.updateModels(examplestoShow, groqModel);

                // Create code sections
                examplestoShow.forEach(example => {
                    this.createCodeSection(example, container);
                });

                // Add installation notes for specific languages
                this.addInstallationNotes(container);
            }

            createVariantTabs(langExamples, container) {
                const variants = Object.keys(langExamples).filter(key =>
                    key !== 'groq' &&
                    typeof langExamples[key] === 'object' &&
                    langExamples[key].groq
                );

                if (variants.length > 0) {
                    const variantTabsContainer = document.createElement('div');
                    variantTabsContainer.className = 'variant-tabs';

                    variants.forEach((variant, index) => {
                        const tab = document.createElement('button');
                        tab.className = 'variant-tab';
                        tab.textContent = variant.charAt(0).toUpperCase() + variant.slice(1);
                        tab.dataset.variant = variant;

                        if (index === 0 && !this.currentVariant) {
                            this.currentVariant = variant;
                            tab.classList.add('active');
                        } else if (this.currentVariant === variant) {
                            tab.classList.add('active');
                        }

                        tab.addEventListener('click', () => {
                            document.querySelectorAll('.variant-tab').forEach(t => t.classList.remove('active'));
                            tab.classList.add('active');
                            this.currentVariant = variant;
                            this.updateExamples();
                        });

                        variantTabsContainer.appendChild(tab);
                    });

                    container.appendChild(variantTabsContainer);
                }
            }

            createCodeSection(example, container) {
                const section = document.createElement('div');
                section.className = 'code-section';

                const header = document.createElement('div');
                header.className = 'code-header';

                const title = document.createElement('div');
                title.className = 'code-title';
                title.textContent = example.title;

                const copyButton = document.createElement('button');
                copyButton.className = 'copy-button';
                copyButton.innerHTML = 'üìã Copy Code';
                copyButton.addEventListener('click', () => this.copyToClipboard(example.code, copyButton));

                header.appendChild(title);
                header.appendChild(copyButton);

                const content = document.createElement('div');
                content.className = 'code-content';

                const pre = document.createElement('pre');
                pre.textContent = example.code;

                content.appendChild(pre);

                section.appendChild(header);
                section.appendChild(content);

                container.appendChild(section);
            }

            addInstallationNotes(container) {
                const notes = this.getInstallationNotes();
                if (notes) {
                    const notesDiv = document.createElement('div');
                    notesDiv.className = 'installation-notes';
                    notesDiv.innerHTML = notes;
                    container.appendChild(notesDiv);
                }

                const modelInfo = this.getModelInfo();
                if (modelInfo) {
                    const infoDiv = document.createElement('div');
                    infoDiv.className = 'model-info';
                    infoDiv.innerHTML = modelInfo;
                    container.appendChild(infoDiv);
                }

                const errorHandling = this.getErrorHandlingInfo();
                if (errorHandling) {
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'error-handling';
                    errorDiv.innerHTML = errorHandling;
                    container.appendChild(errorDiv);
                }
            }

            getInstallationNotes() {
                const notes = {
                    javascript: '<strong>Installation:</strong> For Node.js, install axios: <code>npm install axios</code>',
                    typescript: '<strong>Installation:</strong> Install TypeScript and types: <code>npm install typescript @types/node</code>',
                    python: '<strong>Installation:</strong> Install required packages: <code>pip install requests groq</code>',
                    java: '<strong>Installation:</strong> Add Jackson dependency for JSON parsing: <code>&lt;dependency&gt;&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;&lt;/dependency&gt;</code>',
                    php: '<strong>Installation:</strong> Ensure cURL extension is enabled in PHP configuration',
                    go: '<strong>Installation:</strong> No external dependencies required, uses standard library',
                    ruby: '<strong>Installation:</strong> Install JSON gem if not available: <code>gem install json</code>'
                };

                return notes[this.currentLanguage] || null;
            }

            getModelInfo() {
                return `<strong>Model Information:</strong>
                    ‚Ä¢ Llama 3.3 70B: Most capable model, best for complex reasoning and tasks (Recommended)
                    ‚Ä¢ Llama 3.1 70B: Excellent performance for most applications
                    ‚Ä¢ Mixtral 8x7B: Fast and efficient mixture of experts model
                    ‚Ä¢ Gemma 2 9B: Lightweight model for simple tasks`;
            }

            getErrorHandlingInfo() {
                return `<strong>Common Error Handling:</strong>
                    ‚Ä¢ HTTP 401: Invalid API key
                    ‚Ä¢ HTTP 429: Rate limit exceeded
                    ‚Ä¢ HTTP 400: Invalid request format
                    ‚Ä¢ HTTP 500: Server error, implement retry logic`;
            }

            async copyToClipboard(text, button) {
                try {
                    await navigator.clipboard.writeText(text);
                    const originalText = button.innerHTML;
                    button.innerHTML = '‚úÖ Copied!';
                    button.classList.add('copied');

                    setTimeout(() => {
                        button.innerHTML = originalText;
                        button.classList.remove('copied');
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy: ', err);

                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);

                    button.innerHTML = '‚úÖ Copied!';
                    setTimeout(() => {
                        button.innerHTML = 'üìã Copy Code';
                    }, 2000);
                }
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initializeTheme();
            setupSeamlessNavigation();
            new APIQuickstart();
        });

        // Handle seamless navigation back to source page
        function setupSeamlessNavigation() {
            const urlParams = new URLSearchParams(window.location.search);
            const returnUrl = urlParams.get('return');
            const backButton = document.getElementById('back-button');
            
            if (returnUrl) {
                // If we have a return URL, use it for seamless navigation
                backButton.href = returnUrl;
                
                // Update button text based on return URL
                if (returnUrl.includes('repair.html')) {
                    backButton.innerHTML = 'Back to REPAIR Protocol';
                } else if (returnUrl.includes('index.html')) {
                    backButton.innerHTML = 'Back to Home';
                } else {
                    backButton.innerHTML = 'Back';
                }
            }
            
            // Add click handler for smooth navigation on back button
            backButton.addEventListener('click', function(e) {
                e.preventDefault();
                navigateWithTransition(this.href);
            });
            
            // Add smooth navigation to all internal nav links (exclude external links)
            document.querySelectorAll('nav a').forEach(link => {
                // Only apply smooth navigation to internal links
                if (!link.href.startsWith('http://') && !link.href.startsWith('https://') || 
                    link.href.includes(window.location.hostname)) {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        navigateWithTransition(this.href);
                    });
                }
            });
        }
        
        // Smooth navigation transition function
        function navigateWithTransition(url) {
            // Show loading state on the back button if it's the one being clicked
            const backButton = document.getElementById('back-button');
            const originalText = backButton.textContent;
            
            // Add subtle loading indication
            if (event && event.target === backButton) {
                backButton.style.opacity = '0.7';
                backButton.textContent = 'Loading...';
            }
            
            // Use smooth transition
            document.body.style.opacity = '0.7';
            document.body.style.transition = 'opacity 0.3s ease';
            
            setTimeout(() => {
                window.location.href = url;
            }, 150);
        }
    </script>

        // Chatbot Functions
        function toggleChatWidget() {
            const chatPanel = document.getElementById('agent-panel');
            const chatButton = document.getElementById('floating-chat-button');
            if (chatPanel.classList.contains('active')) {
                chatPanel.classList.remove('active');
                chatButton.classList.remove('hidden');
            } else {
                chatPanel.classList.add('active');
                chatButton.classList.add('hidden');
            }
        }

        function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();

            if (message) {
                addChatMessage(message, 'user');
                input.value = '';

                setTimeout(() => {
                    addChatMessage('Thank you for reaching out! I\'m here to support your REPAIR journey. How can I help you today?', 'assistant');
                }, 1000);
            }
        }

        function addChatMessage(content, sender) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;

            const avatar = document.createElement('div');
            avatar.className = `chat-avatar ${sender}`;
            avatar.textContent = sender === 'assistant' ? '‚ù§Ô∏è' : 'üë§';

            const bubble = document.createElement('div');
            bubble.className = `chat-bubble ${sender}`;
            bubble.textContent = content;

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(bubble);
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Initialize chatbot
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                addChatMessage('Welcome to API Integration Quickstart! ‚ù§Ô∏è I can help you understand how to integrate AI into the REPAIR Protocol, configure API endpoints, and implement relationship analysis features. What would you like to know?', 'assistant');
            }, 500);

            const chatInput = document.getElementById('chat-input');
            if (chatInput) {
                chatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendChatMessage();
                    }
                });
            }
        });
    </script>

    <!-- Floating Chat Button -->
    <button id="floating-chat-button" class="floating-chat-button" onclick="toggleChatWidget()" aria-label="Open chat">
        ‚ù§Ô∏è
    </button>

    <!-- Chat Panel -->
    <div id="agent-panel" class="chat-widget-panel">
        <div class="chat-widget-header">
            <div class="chat-header-title">
                <span class="chat-icon">‚ù§Ô∏è</span>
                <span>REPAIR Guide</span>
            </div>
            <div class="chat-header-actions">
                <button class="chat-action-btn" onclick="toggleChatWidget()" aria-label="Close">
                    ‚úï
                </button>
            </div>
        </div>
        <div class="chat-widget-body">
            <div id="chat-messages" class="chat-messages"></div>
            <div class="chat-input-area">
                <textarea id="chat-input" class="chat-input"
                       placeholder="Ask about the REPAIR process, relationship healing, or reconciliation strategies..."
                       aria-label="Chat input"></textarea>
                <button class="send-button" onclick="sendChatMessage()" aria-label="Send message">
                    ‚û§
                </button>
            </div>
        </div>
    </div>
</body>
</html>
